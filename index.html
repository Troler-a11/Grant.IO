<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRUST_NODE | Professional Escrow</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --main: #00f2ff; --bg: #0a0b10; --card: #12141c; --gray: #888; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; }
        
        .header-ui { position: fixed; top: 0; width: 100%; display: flex; justify-content: space-between; padding: 20px; box-sizing: border-box; z-index: 1000; }
        .user-trigger { width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--main); overflow: hidden; cursor: pointer; background: #1a1a1a; }
        .user-trigger img { width: 100%; height: 100%; object-fit: cover; }
        .burger { font-size: 30px; color: var(--main); cursor: pointer; }

        .profile-panel { display: none; position: fixed; top: 75px; left: 20px; background: var(--card); border: 1px solid var(--main); border-radius: 15px; padding: 15px; width: 260px; z-index: 1001; box-shadow: 0 10px 40px rgba(0,0,0,0.8); }
        .sidebar { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: #0d0e14; transition: 0.4s; z-index: 1500; padding: 60px 20px; border-left: 1px solid var(--main); box-sizing: border-box; }
        .sidebar.active { right: 0; }

        .side-item { display: block; color: white; padding: 15px 0; text-decoration: none; border-bottom: 1px solid #222; font-size: 15px; cursor: pointer; }
        .side-item:hover { color: var(--main); }

        .hero { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
        .status-msg { font-size: 11px; color: var(--main); letter-spacing: 2px; margin-bottom: 10px; text-transform: uppercase; height: 15px; transition: 0.5s; }
        .main-btn { width: 220px; height: 220px; border-radius: 50%; border: 3px solid var(--main); background: transparent; color: white; font-size: 24px; cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0,242,255,0.1); }
        .main-btn:active { transform: scale(0.95); box-shadow: 0 0 40px var(--main); }

        .stat-row { margin-top: 40px; display: flex; gap: 30px; }
        .stat-item b { font-size: 18px; display: block; }
        .stat-item small { color: var(--gray); font-size: 9px; letter-spacing: 1px; }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 2000; overflow-y: auto; }
        .modal-content { max-width: 500px; margin: 20px auto; padding: 20px; position: relative; }
        .rev-item { background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 12px; border-left: 3px solid var(--main); text-align: left; }
        .rev-meta { font-size: 10px; color: var(--gray); float: right; }
        .stars { font-size: 12px; margin: 5px 0; }

        input, textarea { width: 100%; background: #16171d; border: 1px solid #333; color: white; padding: 12px; margin-top: 10px; border-radius: 8px; box-sizing: border-box; }
        .submit-btn { background: var(--main); color: black; border: none; padding: 14px; width: 100%; margin-top: 15px; font-weight: bold; border-radius: 8px; cursor: pointer; }
        .close-x { position: absolute; top: 10px; right: 20px; font-size: 30px; cursor: pointer; color: var(--gray); }
    </style>
</head>
<body>

    <div class="header-ui">
        <div class="user-trigger" onclick="toggleProfile()"><img id="user-ava" src="https://img.icons8.com/ios-glyphs/90/555555/user--v1.png"></div>
        <div class="burger" onclick="toggleSidebar()">‚ò∞</div>
    </div>

    <div class="profile-panel" id="profilePanel">
        <div id="user-info">
            <b id="ui-name">–í—ñ–¥–≤—ñ–¥—É–≤–∞—á</b><br>
            <small id="ui-id">ID: TN-000000</small><br>
            <small id="ui-status" style="color:var(--main)">Status: Visitor</small>
        </div>
        <hr style="border:0; border-top:1px solid #222; margin:10px 0;">
        <div id="g_id_onload" data-client_id="YOUR_ID" data-callback="handleAuth"></div>
        <div class="g_id_signin" id="g-btn" data-type="standard"></div>
        <button id="logout-btn" onclick="logout()" style="display:none; width:100%; background:transparent; border:1px solid #444; color:#ff4444; padding:8px; border-radius:5px; cursor:pointer; margin-top:5px;">–í–∏–π—Ç–∏ –∑ –∞–∫–∞—É–Ω—Ç–∞</button>
    </div>

    <div class="sidebar" id="sidebar">
        <div class="side-item" onclick="openReviews()">üí¨ –í—ñ–¥–≥—É–∫–∏ (1542)</div>
        <div class="side-item" onclick="changeLang()">üåê –ú–æ–≤–∞: <span id="lang-val">UA</span></div>
        <div class="side-item" onclick="toggleProfile(); toggleSidebar();">üë§ –í—Ö—ñ–¥ / –ó–º—ñ–Ω–∞ –∞–∫–∞—É–Ω—Ç–∞</div>
        <a href="https://t.me/pingvin4ikpororo" target="_blank" class="side-item" style="border:none;">‚úàÔ∏è –¢–µ—Ö. –ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a>
    </div>

    <div class="hero">
        <div class="status-msg" id="h-sub">P2P BRIDGE: ONLINE</div>
        <h1 style="letter-spacing:8px; margin:0; font-size: 2.5rem;">TRUST_NODE</h1>
        <p style="color:var(--main); font-size:10px; letter-spacing:4px; margin-bottom:40px;">SECURE ESCROW SYSTEM</p>
        
        <div class="main-btn" onclick="openEscrow()">START</div>

        <div class="stat-row">
            <div class="stat-item"><b>15.4k+</b><small>–£–ì–û–î</small></div>
            <div class="stat-item"><b id="active-days">379</b><small>–î–ù–Ü–í –û–ù–õ–ê–ô–ù</small></div>
            <div class="stat-item"><b>$2.4M</b><small>–û–ë–û–†–û–¢</small></div>
        </div>
    </div>

    <div id="revModal" class="modal">
        <div class="modal-content">
            <span class="close-x" onclick="closeReviews()">√ó</span>
            <h2 style="text-align:center; color:var(--main);">–í—ñ–¥–≥—É–∫–∏</h2>
            <div style="background:#16171d; padding:15px; border-radius:12px; margin-bottom:20px;">
                <textarea id="new-rev-text" placeholder="–ù–∞–ø–∏—à—ñ—Ç—å –≤–∞—à—É –¥—É–º–∫—É..."></textarea>
                <button class="submit-btn" onclick="addNewReview()">–û–ü–£–ë–õ–Ü–ö–£–í–ê–¢–ò</button>
            </div>
            <div id="rev-list"></div>
        </div>
    </div>

    <div id="escrowModal" class="modal">
        <div class="modal-content" style="border: 1px solid var(--main); margin-top: 50px; background: var(--bg);">
            <span class="close-x" onclick="closeEscrow()">√ó</span>
            <h2 style="color:var(--main); text-align:center;">CREATE BRIDGE</h2>
            <input type="number" id="deal-sum" placeholder="–°—É–º–∞ —É–≥–æ–¥–∏ ($)">
            <input type="text" id="seller-id" placeholder="ID –ü—Ä–æ–¥–∞–≤—Ü—è (@tg –∞–±–æ TN-ID)">
            <button class="submit-btn" onclick="processDeal()" id="bridge-btn">–ê–ö–¢–ò–í–£–í–ê–¢–ò –ú–Ü–°–¢</button>
        </div>
    </div>

    <script>
        let currentUser = { isAuth: false, name: "–í—ñ–¥–≤—ñ–¥—É–≤–∞—á", id: "TN-000000", pic: "" };
        let currentLang = "UA";

        // 1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        function init() {
            const start = new Date('2025-01-20');
            const diff = Math.ceil(Math.abs(new Date() - start) / (1000 * 60 * 60 * 24));
            document.getElementById('active-days').innerText = diff;
            generateReviews();
            loopStatus();
        }

        // 2. –†–æ–±–æ—Ç–∞ –∑ –∞–∫–∞—É–Ω—Ç–æ–º
        function handleAuth(resp) {
            const p = JSON.parse(atob(resp.credential.split('.')[1]));
            currentUser = { isAuth: true, name: p.name, pic: p.picture, id: "TN-"+Math.floor(100000+Math.random()*900000) };
            document.getElementById('user-ava').src = currentUser.pic;
            document.getElementById('ui-name').innerText = currentUser.name;
            document.getElementById('ui-id').innerText = "ID: " + currentUser.id;
            document.getElementById('logout-btn').style.display = 'block';
            document.getElementById('g-btn').style.display = 'none';
            document.getElementById('profilePanel').style.display = 'none';
        }

        function logout() {
            location.reload(); // –ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–ø–æ—Å—ñ–± —Å–∫–∏–Ω—É—Ç–∏ –∞–∫–∞—É–Ω—Ç
        }

        // 3. –í—ñ–¥–≥—É–∫–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∑—ñ—Ä–∫–∞–º–∏
        let reviews = [];
        const texts = [
            {t: "–í—Å–µ –≥—É–¥, –∞–∫–∞—É–Ω—Ç –æ—Ç—Ä–∏–º–∞–≤.", s: 5},
            {t: "–î–æ–≤–≥–æ —á–µ–∫–∞–≤ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –∞–¥–º—ñ–Ω–∞, –∞–ª–µ –≥—Ä–æ—à—ñ –ø—Ä–∏–π—à–ª–∏.", s: 3},
            {t: "–ù–æ—Ä–º —Å–µ—Ä–≤—ñ—Å, –∞–ª–µ –∫–æ–º—ñ—Å—ñ—è –∫—É—Å–∞—î—Ç—å—Å—è.", s: 4},
            {t: "–¢–æ–ø –≥–∞—Ä–∞–Ω—Ç, –∫—Ä–∞—â–∏–π –≤ –°–ù–î.", s: 5},
            {t: "–¢—Ä–æ—Ö–∏ –∑–∞–ø–ª—É—Ç–∞–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∞–ª–µ —É–≥–æ–¥–∞ –ø—Ä–æ–π—à–ª–∞ —É—Å–ø—ñ—à–Ω–æ.", s: 4},
            {t: "–ê–∫–∞—É–Ω—Ç –≤—ñ–¥–Ω–æ–≤–∏–ª–∏ —á–µ—Ä–µ–∑ –¥–µ–Ω—å, –∞–ª–µ –≥–∞—Ä–∞–Ω—Ç –ø–æ–≤–µ—Ä–Ω—É–≤ –≥—Ä–æ—à—ñ –∑ —Ö–æ–ª–¥—É! –î—è–∫—É—é!", s: 5},
            {t: "–®–≤–∏–¥–∫–æ, –Ω–∞–¥—ñ–π–Ω–æ, –±–µ–∑ –∑–∞–π–≤–∏—Ö –ø–∏—Ç–∞–Ω—å.", s: 5}
        ];

        function generateReviews() {
            for(let i=0; i<222; i++) {
                let sample = texts[i % texts.length];
                reviews.push({
                    name: "User_" + Math.floor(Math.random()*9999),
                    text: sample.t,
                    stars: sample.s,
                    date: (Math.floor(i/2)+1) + "–¥. —Ç–æ–º—É"
                });
            }
        }

        function renderReviews() {
            const list = document.getElementById('rev-list');
            list.innerHTML = "";
            reviews.forEach(r => {
                list.innerHTML += `
                    <div class="rev-item">
                        <span class="rev-meta">${r.date}</span>
                        <div class="rev-name">${r.name}</div>
                        <div class="stars" style="color:#ffcc00">${"‚òÖ".repeat(r.stars)}<span style="color:#444">${"‚òÖ".repeat(5-r.stars)}</span></div>
                        <div style="font-size:13px;">${r.text}</div>
                    </div>`;
            });
        }

        function addNewReview() {
            if(!currentUser.isAuth) { alert("–£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç!"); toggleProfile(); return; }
            const val = document.getElementById('new-rev-text').value;
            if(val.length < 5) return;
            reviews.unshift({name: currentUser.name, text: val, stars: 5, date: "—â–æ–π–Ω–æ"});
            document.getElementById('new-rev-text').value = "";
            renderReviews();
        }

        // 4. –ú–æ–≤–∞
        function changeLang() {
            currentLang = currentLang === "UA" ? "EN" : "UA";
            document.getElementById('lang-val').innerText = currentLang;
            alert("Language changed to " + currentLang);
        }

        // 5. –°—Ç–∞—Ç—É—Å–∏ —Ç–∞ UI
        function loopStatus() {
            const m = ["NODES ACTIVE: 14", "BRIDGE: SECURE", "P2P ENCRYPTED", "WAITING FOR DEALS"];
            let i = 0;
            setInterval(() => {
                const el = document.getElementById('h-sub');
                el.style.opacity = 0;
                setTimeout(() => { el.innerText = m[i]; el.style.opacity = 1; i = (i+1)%m.length; }, 500);
            }, 4000);
        }

        function toggleSidebar() { document.getElementById('sidebar').classList.toggle('active'); }
        function toggleProfile() { 
            const p = document.getElementById('profilePanel');
            p.style.display = p.style.display === 'block' ? 'none' : 'block'; 
        }
        function openReviews() { document.getElementById('revModal').style.display = 'block'; renderReviews(); toggleSidebar(); }
        function closeReviews() { document.getElementById('revModal').style.display = 'none'; }
        function openEscrow() { 
            if(!currentUser.isAuth) { alert("–£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–∫–∞—É–Ω—Ç!"); toggleProfile(); return; }
            document.getElementById('escrowModal').style.display = 'block'; 
        }
        function closeEscrow() { document.getElementById('escrowModal').style.display = 'none'; }

        function processDeal() {
            const b = document.getElementById('bridge-btn');
            b.innerText = "–ì–ï–ù–ï–†–£–Ñ–ú–û –í–£–ó–û–õ...";
            setTimeout(() => { alert("–ú—ñ—Å—Ç –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–æ! –û—á—ñ–∫—É–π—Ç–µ –ø—Ä–æ–¥–∞–≤—Ü—è."); closeEscrow(); b.innerText = "–ê–ö–¢–ò–í–£–í–ê–¢–ò –ú–Ü–°–¢"; }, 2000);
        }

        window.onload = init;
    </script>
</body>
</html>
