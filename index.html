<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRUST_NODE | Professional Escrow</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --main: #00f2ff; --bg: #0a0b10; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; width: 100vw; }
        
        /* –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –±–∞–≥—É –∑ –±—ñ—á–Ω–∏–º –≤—ñ–∫–æ–Ω—Ü–µ–º */
        .sidebar { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: #0d0e14; transition: 0.4s; z-index: 1500; padding: 60px 20px; border-left: 1px solid var(--main); box-sizing: border-box; }
        .sidebar.active { right: 0; }
        
        /* –ü—Ä–æ—Ñ—ñ–ª—å —Ç–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        .profile-trigger { position: fixed; top: 20px; left: 20px; width: 45px; height: 45px; border-radius: 50%; border: 2px solid var(--main); cursor: pointer; z-index: 1000; overflow: hidden; background: #222; }
        .profile-trigger img { width: 100%; height: 100%; object-fit: cover; }
        .menu-icon { position: fixed; top: 20px; right: 20px; font-size: 30px; cursor: pointer; z-index: 1600; color: var(--main); }
        
        /* –ì–æ–ª–æ–≤–Ω–∞ –∫—Ä—É–≥–ª–∞ –∫–Ω–æ–ø–∫–∞ */
        .hero { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 0 20px; }
        .main-circle-btn {
            width: 200px; height: 200px; border-radius: 50%; border: 4px solid var(--main);
            background: transparent; color: white; font-size: 18px; font-weight: bold;
            cursor: pointer; box-shadow: 0 0 20px rgba(0, 242, 255, 0.2);
            transition: 0.4s; display: flex; align-items: center; justify-content: center;
            text-transform: uppercase; letter-spacing: 2px;
        }

        /* –í—ñ–¥–≥—É–∫–∏ */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); overflow-y: auto; }
        .modal-content { background: #0d0e14; margin: 20px auto; padding: 20px; width: 90%; max-width: 500px; border-radius: 20px; border: 1px solid var(--main); }
        .rev-card { background: #16171d; padding: 15px; border-radius: 12px; margin-bottom: 10px; border: 1px solid #222; }
        .rev-user { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; font-size: 12px; color: var(--main); }
        .user-ico { width: 30px; height: 30px; border-radius: 50%; background: #333; display: flex; align-items: center; justify-content: center; font-size: 14px; color: white; border: 1px solid var(--main); }
        
        /* –§–æ—Ä–º–∞ –≤—ñ–¥–≥—É–∫—É */
        .write-rev { margin-top: 20px; padding: 15px; border-top: 1px solid #333; display: none; }
        .stars-input span { font-size: 25px; cursor: pointer; color: #444; }
        .stars-input span.active { color: #ffcc00; }
        
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 25px; width: 90%; max-width: 350px; margin-top: 20px; }
        input, select { width: 100%; padding: 12px; margin: 8px 0; background: #111; border: 1px solid #333; color: white; border-radius: 8px; }
    </style>
</head>
<body>

    <div class="profile-trigger" onclick="toggleProfile()"><img id="u-ava" src="https://img.icons8.com/ios-glyphs/90/ffffff/user--v1.png"></div>
    <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>

    <div class="sidebar" id="sidebar">
        <div id="g_id_onload" data-client_id="–í–°–¢–ê–í_–°–í–Ü–ô_ID" data-callback="onSignIn"></div>
        <div class="g_id_signin" data-type="standard"></div>
        <nav style="margin-top:30px;">
            <select id="lang-select" onchange="changeLang()">
                <option value="uk">üá∫üá¶ –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞</option>
                <option value="en">üá∫üá∏ English</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            </select>
            <a onclick="showReviews()" class="menu-link" id="m-rev">üí¨ –í—ñ–¥–≥—É–∫–∏ (1234)</a>
            <a href="https://t.me/pingvin4ikpororo" class="menu-link" id="m-sup">‚úàÔ∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a>
            <a onclick="location.reload()" class="menu-link" style="color:#ff4444;" id="m-out">üîÑ –í–∏–π—Ç–∏</a>
        </nav>
    </div>

    <div class="hero">
        <h1 id="h-logo" style="letter-spacing:8px; color:var(--main); margin:0;">TRUST_NODE</h1>
        <p id="h-sub" style="opacity:0.4; font-size:10px; margin-bottom:40px;">INTERNATIONAL ESCROW SYSTEM</p>
        <button class="main-circle-btn" id="start-btn" onclick="showStep('connect')" disabled>–ü–û–ß–ê–¢–ò</button>
    </div>

    <div id="revModal" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer;" onclick="closeReviews()">‚úï</span>
            <h2 id="r-head">–í—ñ–¥–≥—É–∫–∏</h2>
            
            <div id="rev-form" class="write-rev">
                <div class="stars-input" id="stars-in">
                    <span onclick="setRate(1)">‚òÖ</span><span onclick="setRate(2)">‚òÖ</span><span onclick="setRate(3)">‚òÖ</span><span onclick="setRate(4)">‚òÖ</span><span onclick="setRate(5)">‚òÖ</span>
                </div>
                <input type="text" id="rev-text" placeholder="–í–∞—à –∫–æ–º–µ–Ω—Ç–∞—Ä...">
                <button onclick="sendReview()" style="background:var(--main); border:none; padding:10px; width:100%; border-radius:8px; font-weight:bold;">–û–ü–£–ë–õ–Ü–ö–£–í–ê–¢–ò</button>
            </div>

            <div id="rev-list" style="margin-top:15px;"></div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        let user = { email: "", id: "TN-" + Math.floor(100000 + Math.random()*800000), rate: 0, isAuth: false };
        const i18n = {
            uk: { start: "–ü–û–ß–ê–¢–ò", sub: "–ú–Ü–ñ–ù–ê–†–û–î–ù–ê –°–ò–°–¢–ï–ú–ê –ì–ê–†–ê–ù–¢", rev: "–í—ñ–¥–≥—É–∫–∏ (1234)", sup: "–ü—ñ–¥—Ç—Ä–∏–º–∫–∞", out: "–í–∏–π—Ç–∏" },
            en: { start: "START", sub: "INTERNATIONAL ESCROW SYSTEM", rev: "Reviews (1234)", sup: "Support", out: "Logout" },
            ru: { start: "–ù–ê–ß–ê–¢–¨", sub: "–ú–ï–ñ–î–£–ù–ê–†–û–î–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ì–ê–†–ê–ù–¢", rev: "–û—Ç–∑—ã–≤—ã (1234)", sup: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞", out: "–í—ã–π—Ç–∏" }
        };

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('active'); }
        function changeLang() {
            const l = document.getElementById('lang-select').value;
            document.getElementById('start-btn').innerText = i18n[l].start;
            document.getElementById('h-sub').innerText = i18n[l].sub;
            document.getElementById('m-rev').innerText = "üí¨ " + i18n[l].rev;
            document.getElementById('m-sup').innerText = "‚úàÔ∏è " + i18n[l].sup;
            document.getElementById('m-out').innerText = "üîÑ " + i18n[l].out;
        }

        function onSignIn(resp) {
            const p = JSON.parse(atob(resp.credential.split('.')[1]));
            user.email = p.email; user.isAuth = true;
            document.getElementById('u-ava').src = p.picture;
            document.getElementById('start-btn').disabled = false;
            document.getElementById('rev-form').style.display = 'block';
            toggleMenu();
        }

        function setRate(r) {
            user.rate = r;
            const s = document.getElementById('stars-in').children;
            for(let i=0; i<5; i++) s[i].className = i < r ? 'active' : '';
        }

        async function sendReview() {
            const txt = document.getElementById('rev-text').value;
            if(!txt || user.rate === 0) return alert("–û–±–µ—Ä—ñ—Ç—å –∑—ñ—Ä–∫–∏ —Ç–∞ –Ω–∞–ø–∏—à—ñ—Ç—å —Ç–µ–∫—Å—Ç!");
            await db.collection("real_reviews").add({
                uid: user.id, text: txt, rate: user.rate, time: Date.now()
            });
            document.getElementById('rev-text').value = "";
            loadReviews();
        }

        function showReviews() { document.getElementById('revModal').style.display = 'block'; loadReviews(); toggleMenu(); }
        function closeReviews() { document.getElementById('revModal').style.display = 'none'; }

        function loadReviews() {
            const list = document.getElementById('rev-list');
            let h = "";
            
            // "–ú—ñ–Ω—ñ-–®–Ü" –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è 1234 –≤—ñ–¥–≥—É–∫—ñ–≤
            const texts = ["–®–≤–∏–¥–∫–æ!", "Safe and fast", "–ö–æ–º—ñ—Å—ñ—è –≤–∏—Å–æ–∫–∞, –∞–ª–µ –Ω–∞–¥—ñ–π–Ω–æ", "Everything is good", "–î–æ–≤—ñ—Ä—è—é —Ü—å–æ–º—É —Å–µ—Ä–≤—ñ—Å—É", "Top escrow", "–ù–æ—Ä–º —Ç–µ–º–∞"];
            for(let i=0; i<20; i++) { // –ü–æ–∫–∞–∑—É—î–º–æ –ø–µ—Ä—à—ñ 20 –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
                const r = Math.floor(Math.random()*2) + 4;
                const id = "TN-" + (800000 - i*342);
                h += `<div class="rev-card">
                    <div class="rev-user"><div class="user-ico">${id[3]}</div><b>${id}</b></div>
                    <div style="color:#ffcc00; font-size:12px;">${"‚òÖ".repeat(r)}</div>
                    <p style="font-size:13px; margin:5px 0;">${texts[i % texts.length]}</p>
                </div>`;
            }

            // –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –†–ï–ê–õ–¨–ù–ò–• –∑ –±–∞–∑–∏
            db.collection("real_reviews").orderBy("time", "desc").get().then(snap => {
                snap.forEach(doc => {
                    const d = doc.data();
                    h = `<div class="rev-card" style="border: 1px solid var(--main)">
                        <div class="rev-user"><div class="user-ico" style="background:var(--main)">‚úì</div><b>${d.uid} (Real)</b></div>
                        <div style="color:#ffcc00; font-size:12px;">${"‚òÖ".repeat(d.rate)}</div>
                        <p style="font-size:13px; margin:5px 0;">${d.text}</p>
                    </div>` + h;
                });
                list.innerHTML = h;
            });
        }
    </script>
</body>
</html>
