<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TRUST_NODE | Escrow System</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        :root { --main: #00f2ff; --bg: #0a0b10; --card: #12141c; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow-x: hidden; width: 100vw; }
        
        /* –ü—Ä–æ—Ñ—ñ–ª—å */
        .profile-trigger { position: fixed; top: 20px; left: 20px; width: 48px; height: 48px; border-radius: 50%; border: 2px solid var(--main); cursor: pointer; z-index: 1000; overflow: hidden; background: #1a1a1a; box-shadow: 0 0 15px rgba(0,242,255,0.3); }
        .profile-trigger img { width: 100%; height: 100%; object-fit: cover; }
        
        .profile-card { display: none; position: fixed; top: 80px; left: 20px; background: var(--card); border: 1px solid var(--main); padding: 20px; border-radius: 18px; z-index: 1001; width: 260px; box-shadow: 0 15px 50px rgba(0,0,0,0.9); animation: fadeIn 0.3s; }
        @keyframes fadeIn { from {opacity:0; transform: translateY(-10px);} to {opacity:1; transform: translateY(0);} }

        /* –ú–µ–Ω—é (–≤–∏–ø—Ä–∞–≤–ª–µ–Ω–µ) */
        .menu-icon { position: fixed; top: 22px; right: 20px; font-size: 28px; cursor: pointer; z-index: 1600; color: var(--main); }
        .sidebar { position: fixed; top: 0; right: -100%; width: 280px; height: 100%; background: #0d0e14; transition: 0.4s ease; z-index: 1500; padding: 70px 20px; border-left: 1px solid var(--main); box-sizing: border-box; }
        .sidebar.active { right: 0; }
        .menu-link { display: block; padding: 18px 0; color: #eee; text-decoration: none; border-bottom: 1px solid #1a1a1a; font-size: 15px; }

        /* –ì–æ–ª–æ–≤–Ω–∞ –∫–Ω–æ–ø–∫–∞ (—è–∫ –Ω–∞ Speedtest) */
        .hero { min-height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .main-circle-btn {
            width: 230px; height: 230px; border-radius: 50%; border: 4px solid var(--main);
            background: transparent; color: white; font-size: 22px; font-weight: bold;
            cursor: pointer; box-shadow: 0 0 40px rgba(0, 242, 255, 0.1);
            transition: 0.5s; display: flex; align-items: center; justify-content: center;
            text-transform: uppercase; letter-spacing: 3px; position: relative;
        }
        .main-circle-btn:hover:not(:disabled) { box-shadow: 0 0 60px var(--main); transform: scale(1.03); background: rgba(0, 242, 255, 0.03); }

        /* –í—ñ–¥–≥—É–∫–∏ (–õ—é–¥—Å—å–∫—ñ) */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.96); overflow-y: auto; }
        .modal-content { background: #0a0b10; margin: 20px auto; padding: 20px; width: 92%; max-width: 550px; border-radius: 20px; }
        .rev-card { background: var(--card); padding: 16px; border-radius: 14px; margin-bottom: 12px; border: 1px solid #1f222e; }
        .rev-header { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
        .rev-avatar { width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 14px; color: white; border: 1px solid var(--main); }
        .stars { color: #444; font-size: 14px; margin-bottom: 6px; }
        .stars .active { color: #ffcc00; }
        
        .lang-bar { display: flex; gap: 10px; margin-bottom: 20px; }
        .lang-btn { background: #1a1a1a; border: 1px solid #333; color: white; padding: 8px 12px; border-radius: 6px; font-size: 12px; flex: 1; }
        .lang-btn.active { border-color: var(--main); color: var(--main); }
    </style>
</head>
<body>

    <div class="profile-trigger" onclick="toggleProfile()">
        <img id="u-ava" src="https://img.icons8.com/ios-glyphs/90/555555/user--v1.png">
    </div>

    <div class="profile-card" id="profileCard">
        <h4 id="u-name" style="margin:0 0 5px 0;">–í—ñ–¥–≤—ñ–¥—É–≤–∞—á</h4>
        <p style="font-size:12px; color:var(--main); margin:0;">Status: <span id="u-status">Visitor</span></p>
        <p style="font-size:12px; margin:5px 0;">ID: <span id="u-id">TN-000000</span></p>
        <p id="u-stat" style="font-size:12px; color:#888;">–£–≥–æ–¥: 0</p>
        <div id="adm-box" style="display:none; border-top:1px solid #333; margin-top:10px; padding-top:10px;">
            <p style="color:gold; font-size:11px;">üîî –ú–û–ù–Ü–¢–û–†–ò–ù–ì:</p>
            <div id="adm-logs" style="font-size:10px; color:#666;">–õ–æ–≥–∏ –ø–æ—Ä–æ–∂–Ω—ñ...</div>
        </div>
    </div>

    <div class="menu-icon" onclick="toggleMenu()">‚ò∞</div>

    <div class="sidebar" id="sidebar">
        <div class="lang-bar">
            <button class="lang-btn active" onclick="setLang('uk')">UA</button>
            <button class="lang-btn" onclick="setLang('en')">EN</button>
            <button class="lang-btn" onclick="setLang('ru')">RU</button>
        </div>
        <div id="g_id_onload" data-client_id="–í–°–¢–ê–í_–°–í–Ü–ô_ID_–¢–£–¢" data-callback="onSignIn"></div>
        <div class="g_id_signin" data-type="standard"></div>
        
        <nav style="margin-top:20px;">
            <a onclick="showReviews()" class="menu-link" id="l-rev">üí¨ –í—ñ–¥–≥—É–∫–∏ (1432)</a>
            <a href="https://t.me/pingvin4ikpororo" class="menu-link" id="l-sup">‚úàÔ∏è –ü—ñ–¥—Ç—Ä–∏–º–∫–∞</a>
            <a onclick="location.reload()" class="menu-link" style="color:#ff4444;" id="l-out">üîÑ –ó–º—ñ–Ω–∏—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç</a>
        </nav>
    </div>

    <div class="hero">
        <h1 id="h-logo" style="letter-spacing:10px; color:var(--main); margin:0;">TRUST_NODE</h1>
        <p id="h-sub" style="opacity:0.4; font-size:10px; margin-bottom:50px; letter-spacing:3px;">INTERNATIONAL ESCROW SYSTEM</p>
        <button class="main-circle-btn" id="start-btn" onclick="showStep('connect')" disabled>–ü–û–ß–ê–¢–ò</button>
    </div>

    <div id="revModal" class="modal">
        <div class="modal-content">
            <span style="float:right; cursor:pointer; font-size:24px;" onclick="closeReviews()">‚úï</span>
            <h2 id="r-head" style="color:var(--main)">–†–µ–ø—É—Ç–∞—Ü—ñ—è –≤—É–∑–ª–∞</h2>
            
            <div id="rev-form" style="display:none; margin-bottom:25px; background:#16171d; padding:15px; border-radius:15px;">
                <p style="font-size:13px; margin:0 0 10px 0;">–ó–∞–ª–∏—à–∏—Ç–∏ –≤—ñ–¥–≥—É–∫:</p>
                <div id="stars-in" style="font-size:24px; color:#444; margin-bottom:10px; cursor:pointer;">
                    <span onclick="setRate(1)">‚òÖ</span><span onclick="setRate(2)">‚òÖ</span><span onclick="setRate(3)">‚òÖ</span><span onclick="setRate(4)">‚òÖ</span><span onclick="setRate(5)">‚òÖ</span>
                </div>
                <input type="text" id="rev-txt" placeholder="–¢–µ–∫—Å—Ç..." style="width:100%; padding:10px; background:#000; border:1px solid #333; color:white; border-radius:8px;">
                <button onclick="sendReview()" style="width:100%; margin-top:10px; padding:10px; background:var(--main); border:none; border-radius:8px; font-weight:bold;">–í–Ü–î–ü–†–ê–í–ò–¢–ò</button>
            </div>

            <div id="rev-list"></div>
        </div>
    </div>

    <script src="config.js"></script>
    <script>
        let user = { id: "TN-000000", isAuth: false, role: "Visitor", rate: 0 };
        const trans = {
            uk: { start:"–ü–û–ß–ê–¢–ò", sub:"–ú–Ü–ñ–ù–ê–†–û–î–ù–ê –°–ò–°–¢–ï–ú–ê –ì–ê–†–ê–ù–¢", rev:"–í—ñ–¥–≥—É–∫–∏ (1432)", sup:"–ü—ñ–¥—Ç—Ä–∏–º–∫–∞", out:"–ó–º—ñ–Ω–∏—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç", head:"–†–µ–ø—É—Ç–∞—Ü—ñ—è –≤—É–∑–ª–∞" },
            en: { start:"START", sub:"INTERNATIONAL ESCROW SYSTEM", rev:"Reviews (1432)", sup:"Support", out:"Change Account", head:"Node Reputation" },
            ru: { start:"–ù–ê–ß–ê–¢–¨", sub:"–ú–ï–ñ–î–£–ù–ê–†–û–î–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ì–ê–†–ê–ù–¢", rev:"–û—Ç–∑—ã–≤—ã (1432)", sup:"–ü–æ–¥–¥–µ—Ä–∂–∫–∞", out:"–°–º–µ–Ω–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç", head:"–†–µ–ø—É—Ç–∞—Ü–∏—è —É–∑–ª–∞" }
        };

        function setLang(l) {
            document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            document.getElementById('start-btn').innerText = trans[l].start;
            document.getElementById('h-sub').innerText = trans[l].sub;
            document.getElementById('l-rev').innerText = "üí¨ " + trans[l].rev;
            document.getElementById('l-sup').innerText = "‚úàÔ∏è " + trans[l].sup;
            document.getElementById('l-out').innerText = "üîÑ " + trans[l].out;
            document.getElementById('r-head').innerText = trans[l].head;
        }

        function toggleMenu() { document.getElementById('sidebar').classList.toggle('active'); }
        function toggleProfile() { 
            const p = document.getElementById('profileCard');
            p.style.display = p.style.display === 'block' ? 'none' : 'block';
        }

        function onSignIn(resp) {
            const p = JSON.parse(atob(resp.credential.split('.')[1]));
            user.isAuth = true;
            user.id = "TN-" + Math.floor(100000 + Math.random()*800000);
            user.role = (p.email === CONFIG.adminEmail) ? "Admin" : "User";
            
            document.getElementById('u-ava').src = p.picture;
            document.getElementById('u-name').innerText = p.name;
            document.getElementById('u-id').innerText = user.id;
            document.getElementById('u-status').innerText = user.role;
            document.getElementById('u-stat').innerText = "–£–≥–æ–¥: " + (user.role === "Admin" ? "999+" : "12");
            document.getElementById('start-btn').disabled = false;
            document.getElementById('rev-form').style.display = 'block';
            if(user.role === "Admin") document.getElementById('adm-box').style.display = 'block';
            toggleMenu();
        }

        function setRate(r) {
            user.rate = r;
            const spans = document.getElementById('stars-in').children;
            for(let i=0; i<5; i++) spans[i].style.color = i < r ? '#ffcc00' : '#444';
        }

        // –ì–ï–ù–ï–†–ê–¢–û–† "–õ–Æ–î–Ø–ù–ò–•" –í–Ü–î–ì–£–ö–Ü–í
        function loadReviews() {
            const list = document.getElementById('rev-list');
            let h = "";
            const humantexts = [
                "–ö–æ–º—ñ—Å—ñ—è 11% —Ü–µ –∑–≤–∏—á–∞–π–Ω–æ –∑–∞–Ω–∞–¥—Ç–æ, –∞–ª–µ —Ö–æ—á –±–µ–∑ –æ–±–º–∞–Ω—É. –ì—Ä–æ—à—ñ –ø—Ä–∏–π—à–ª–∏ –∑–∞ 10 —Ö–≤.",
                "–°–¥–µ–ª–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –í–∞–¥–∏–º –æ—Ç–≤–µ—á–∞–ª –¥–æ–ª–≥–æ–≤–∞—Ç–æ, –º–∏–Ω—É—Ç 20 –∂–¥–∞–ª.",
                "Safe service. High fee is the only minus.",
                "–ß–µ–∫–∞–≤ –≤–∏–ø–ª–∞—Ç—É 3 –≥–æ–¥–∏–Ω–∏, –≤–∂–µ –ø–æ—á–∞–≤ –Ω–µ—Ä–≤—É–≤–∞—Ç–∏. –ù–∞–ø–∏—Å–∞–≤ —É —Å–∞–ø–ø–æ—Ä—Ç, –í–∞–¥–∏–º –≤—ñ–¥–ø–æ–≤—ñ–≤ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ —ñ –≤—Å–µ –≤–∏—Ä—ñ—à–∏–≤. –î—è–∫—É—é!",
                "–í—Å–µ –æ–∫, –∞–ª–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç—Ä–æ—Ö–∏ —Ç–µ–º–Ω–∏–π.",
                "–õ—É—á—à–∏–π –≥–∞—Ä–∞–Ω—Ç –¥–ª—è —Å–¥–µ–ª–æ–∫ –≤ —Ç–µ–ª–µ–≥–µ. –ü—Ä–æ—Ü–µ–Ω—Ç –≤—ã—Å–æ–∫–∏–π, –Ω–æ –æ–Ω–æ —Ç–æ–≥–æ —Å—Ç–æ–∏—Ç.",
                "–ó–∞–≤–∏—Å –ø–ª–∞—Ç–µ–∂ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±–∞–Ω–∫–∞, –¥—É–º–∞–ª –∫–∏–Ω—É–ª–∏. –ê–¥–º–∏–Ω –∫—Ä–∞—Å–∞–≤–∞, –ø–æ–º–æ–≥ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.",
                "Fast, safe, trusted. Used for 3000 UAH deal."
            ];
            const colors = ["#ff3366", "#33ff99", "#ff9933", "#3399ff", "#cc33ff"];

            for(let i=0; i<1432; i++) {
                if(i > 15) break; // –î–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ–∫–∞–∑—É—î–º–æ 15, —ñ–Ω—à—ñ "–≤ –±–∞–∑—ñ"
                const r = Math.floor(Math.random()*2) + 4; // 4 –∞–±–æ 5 –∑—ñ—Ä–æ–∫
                const color = colors[i % colors.length];
                const id = "TN-" + (798000 - i*123);
                
                h += `<div class="rev-card">
                    <div class="rev-header">
                        <div class="rev-avatar" style="border-color:${color}; color:${color}">${id[3]}</div>
                        <span style="font-size:13px; color:var(--main);">${id}</span>
                        <span style="margin-left:auto; font-size:10px; color:#555;">${i+1}–¥. —Ç–æ–º—É</span>
                    </div>
                    <div class="stars">${"<span class='active'>‚òÖ</span>".repeat(r)}${"<span>‚òÖ</span>".repeat(5-r)}</div>
                    <p style="font-size:13px; line-height:1.5; margin:5px 0;">${humantexts[i % humantexts.length]}</p>
                </div>`;
            }
            list.innerHTML = h;
        }

        function showReviews() { document.getElementById('revModal').style.display = 'block'; loadReviews(); toggleMenu(); }
        function closeReviews() { document.getElementById('revModal').style.display = 'none'; }
    </script>
</body>
</html>
